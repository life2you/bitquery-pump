# Pump.fun 交易策略文档

## 策略概述

本文档详细介绍了基于Bitquery Pump.fun API开发的自动化交易策略系统。该系统通过实时监控Solana上的Pump.fun平台，使用多维度指标分析代币并提供买入卖出建议。

我们实现的是一个全面的代币评估系统，综合分析多个关键指标为代币评分并提供交易建议。

## 评估指标

### 核心指标（总分100分）

1. **绑定曲线进度 (25%)** 
   - 跟踪代币从Pump.fun"毕业"到Raydium的进度
   - 公式: `(Supply * LastPrice) / 10,000,000`，结果≥1时代币有资格"毕业"
   - 最佳买入区间在40%-90%之间，超过90%风险逐渐增加

2. **流动性评分 (15%)**
   - 评估代币在交易池中的流动性
   - 分析Pump.fun官方流动性池中代币余额
   - 高流动性代币更容易买卖，滑点小

3. **早期买家行为 (20%)**
   - 分析首批100名买家的持有情况
   - 早期买家持有比例高表明信心强
   - 早期买家大量抛售是强烈卖出信号

4. **价格动量 (25%)**
   - 基于OHLC数据分析价格趋势和近期动量
   - 结合短期和中期价格变化率
   - 上升趋势+加速增长得分高

5. **交易活跃度 (15%)**
   - 评估交易量、买卖比例和独立交易者数量
   - 买入笔数多于卖出为正面信号
   - 活跃的交易表明市场有兴趣

## 买入策略

### 1. 即将毕业策略

**说明**: 寻找即将从Pump.fun毕业到Raydium的代币，这些代币通常会有显著价格上涨。

**条件**:
- 绑定曲线进度达到90%以上，但尚未达到98%
- 重点关注进度在90%-95%区间的代币，此时买入风险回报最佳

**资金分配**:
- 对每个符合条件的代币分配1000单位资金
- 优先级高，因为这类机会能带来快速回报

**代码实现**: `graduatingTokenStrategy` 函数

### 2. 早期买家持有策略

**说明**: 跟踪早期买家的持有行为，当大多数早期买家仍在持有且价格呈上升趋势时买入。

**条件**:
- 早期买家持有率 >= 70%
- 价格趋势为上升(bullish)
- 关注最近创建的代币

**资金分配**:
- 对每个符合条件的代币分配500单位资金

**代码实现**: `earlyBuyerHoldStrategy` 函数

### 3. 综合评分策略

**说明**: 使用系统的综合评分推荐买入，自动跟踪高评分代币。

**条件**:
- 总评分 >= 75分
- 系统推荐为"buy"
- 各项指标均衡发展

**资金分配**:
- 对每个符合条件的代币分配800单位资金
- 取评分最高的前5个代币

**代码实现**: `highScoreStrategy` 函数

## 卖出策略

### 1. 止盈止损策略

**说明**: 根据价格变动设置止盈止损点，保护资金安全并锁定利润。

**条件**:
- 盈利 >= 50%: 全部卖出止盈
- 盈利 >= 30%: 卖出一半仓位，锁定部分利润
- 亏损 >= 15%: 全部卖出止损，控制风险

**代码实现**: `takeProfitStopLossStrategy` 函数

### 2. 评分变化策略

**说明**: 当代币评分显著下降时卖出，避免持有劣质资产。

**条件**:
- 系统推荐为"sell"
- 或总评分 < 40分
- 重点关注早期高分现在低分的代币

**代码实现**: `scoreDecreaseStrategy` 函数

### 3. 早期买家抛售检测策略

**说明**: 当早期买家大量抛售时，跟随卖出，避免被"割韭菜"。

**条件**:
- 早期买家持有率 < 35%
- 这通常表明内部人士或大户正在抛售

**代码实现**: `earlyBuyerSellDetectionStrategy` 函数

## 风险管理

1. **资金分配**
   - 即将毕业策略: 1000单位/代币
   - 早期买家持有策略: 500单位/代币
   - 综合评分策略: 800单位/代币
   - 建议总资金在10000-20000单位之间

2. **止损设置**
   - 统一设置15%止损点
   - 高风险代币可考虑收紧至10%

3. **分散投资**
   - 单个代币最大持仓不超过总资金20%
   - 推荐同时持有5-10个不同代币

4. **定期评估**
   - 每天执行一次评分重新评估
   - 监控早期买家持有变化

## 模拟交易系统

系统包含完整的模拟交易功能，可以记录:

1. **买入记录**
   - 买入时间、价格、数量
   - 买入理由和使用的策略

2. **卖出记录**
   - 卖出时间、价格、数量
   - 盈亏金额和百分比
   - 卖出理由

3. **持仓分析**
   - 当前持有代币列表
   - 平均买入价、当前价格
   - 未实现盈亏

4. **策略绩效**
   - 各策略盈亏比较
   - 胜率和平均收益率

## API接口

系统提供以下API接口:

### 分析相关
- `GET /api/analysis/token/:address` - 获取代币分析
- `GET /api/analysis/recommendations` - 获取推荐买入代币
- `GET /api/analysis/bonding-curve/:address` - 获取绑定曲线进度
- `GET /api/analysis/graduating-tokens` - 获取即将毕业代币

### 模拟交易相关
- `POST /api/simulation/buy` - 手动模拟买入
- `POST /api/simulation/sell` - 手动模拟卖出
- `GET /api/simulation/holdings` - 获取当前持仓
- `GET /api/simulation/history` - 获取交易历史
- `GET /api/simulation/performance` - 获取策略绩效
- `POST /api/simulation/auto-buy` - 执行自动买入
- `POST /api/simulation/auto-sell` - 执行自动卖出

## 未来改进方向

1. **波动率分析**
   - 添加波动率指标评估代币风险

2. **机器学习模型**
   - 基于历史数据训练预测模型
   - 优化买入卖出时机

3. **社交因素**
   - 添加社交媒体情绪分析
   - 监控项目方活动和公告

4. **自动化调仓**
   - 根据策略绩效动态调整资金分配

5. **实时提醒**
   - 买入卖出信号短信或邮件提醒
   - 紧急市场情况预警

## 使用建议

1. 先在模拟环境测试2-4周，评估各策略表现
2. 从小资金量开始，逐步增加
3. 定期回测和调整参数
4. 结合市场整体情况使用策略
5. 关注Solana生态整体健康状况

## 策略执行流程

1. 每日定时执行自动分析
2. 执行各买入策略，筛选最佳机会
3. 执行各卖出策略，控制风险
4. 记录交易结果和绩效
5. 调整策略和参数

通过以上策略组合，交易者可以更系统地参与Pump.fun代币交易，提高成功率并控制风险。 